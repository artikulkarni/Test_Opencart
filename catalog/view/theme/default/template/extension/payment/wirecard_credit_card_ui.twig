<script id="credit-card-lib" src="{{ base_url }}/engine/hpp/paymentPageLoader.js" type="text/javascript"></script>
<div id="creditcard-form-div"></div>
<script type="application/javascript"><!--
    $('#credit-card-lib').ready(function () {
        console.log('blablabla');
        WirecardPaymentPage.seamlessRenderForm({
            requestData: getCreditCardRequestData() ,
            wrappingDivId: "creditcard-form-div",
            onSuccess: logCallback,
            onError: logCallback
        });
    });

    function logCallback(response) {
        console.log(response);
    }

    function getCreditCardRequestData() {
        $.ajax({
            url: 'index.php?route=extension/payment/wirecard_pg_creditcard/getCreditCardUiRequestData',
            type: 'get',
            dataType: 'json',
            success: function(json) {
                return json;
            },
            error: function(xhr, ajaxOptions, thrownError) {
                console.log(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
            }
        });
    }
    -->
</script>